<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIREST</title>
</head>
<body>

    <h1 id="operando1">Operando 1: </h1>
    <h1 id="operando2">Operando 2: </h1>
    <h1 id="resultado">Resultado: </h1>    
    <script>
        var ip=prompt("Dime una IP")
        const ipv4Regex = /^((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)$/;
        async function obtenerYCalcular() {
            try {
                const respuesta = await fetch("http://192.168.50.120:8069/aleatorioretardo");
                const texto = await respuesta.text();
                const numero = parseInt(texto, 10);

                if (isNaN(numero)) {
                    document.getElementById("error").textContent =
                        "El servidor no devolvió un número válido";
                    return;
                }

                document.getElementById("num").textContent = numero;
                document.getElementById("doble").textContent = numero * 2;
                document.getElementById("triple").textContent = numero * 3;
                document.getElementById("cuadrado").textContent = numero ** 2;
                document.getElementById("mitad").textContent = numero / 2;

                const primo = esPrimo(numero);
                document.getElementById("esPrimo").textContent = primo ? "Sí" : "No";

                const lista = primosHasta(numero);
                document.getElementById("listaPrimos").textContent = lista.join(", ");

            } catch (error) {
                document.getElementById("error").textContent =
                    "Error al obtener el número: " + error;
            }
        }
        obtenerYCalcular()
    </script>
</body>
</html>